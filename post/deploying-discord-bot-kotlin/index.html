<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=theme-color content="dark"><title>Deploying discord bots written in Kotlin to Heroku | jiahao.blog</title>
<meta property="og:site_name" content="jiahao.blog"><meta property="og:title" content="Deploying discord bots written in Kotlin to Heroku | jiahao.blog"><meta itemprop=name content="Deploying discord bots written in Kotlin to Heroku | jiahao.blog"><meta name=twitter:title content="Deploying discord bots written in Kotlin to Heroku | jiahao.blog"><meta name=application-name content="Deploying discord bots written in Kotlin to Heroku | jiahao.blog"><meta name=twitter:card content="summary"><meta name=description content="A (revised) guide to deploying JVM-based Discord bots on Heroku"><meta name=twitter:description content="A (revised) guide to deploying JVM-based Discord bots on Heroku "><meta itemprop=description content=" A (revised) guide to deploying JVM-based Discord bots on Heroku "><meta property="og:description" content=" A (revised) guide to deploying JVM-based Discord bots on Heroku "><meta property="og:type" content="article"><meta property="article:publisher" content="Jia Hao (jiāháo)"><meta property="og:article:published_time" content=2020-04-21T00:00:00Z><meta property="article:published_time" content=2020-04-21T00:00:00Z><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Deploying discord bots written in Kotlin to Heroku","author":{"@type":"Person","name":"Jia Hao (jiāháo)"},"datePublished":"2020-04-21","description":"A (revised) guide to deploying JVM-based Discord bots on Heroku","wordCount":1632,"mainEntityOfPage":"True","dateModified":"2020-04-21","publisher":{"@type":"Organization","name":"Jia Hao (jiāháo)","logo":{"@type":"imageObject","url":"\/favicon.ico"}}}</script><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=stylesheet href=/sass/main.min.ab99ff095f832511e24ffb2fba2b51ad473b2f7e9301d674eba2c6c3a6e8bd81.css></head><script>(function(){const e="ThemeColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="ThemeColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.userColorScheme="dark":document.documentElement.dataset.userColorScheme="light"})()</script><body class=dark><nav class=navbar><div class=container><div class=flex><div><a class=brand href=/><span class=emoji>☃️
</span>jiahao.blog</a></div><div class=flex><a href=/articles/>Articles</a>
<button id=dark-mode-button><svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163.0 101.643 1.641 1.163 1.163.0 00-1.643-1.641zm-16.022 14.38a1.74 1.74.0 000 2.465 1.742 1.742.0 100-2.465zm13.968-2.147a2.904 2.904.0 01-4.108.0 2.902 2.902.0 010-4.107 2.902 2.902.0 014.108.0 2.902 2.902.0 010 4.107z" fill="#ffcc4d"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg><svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M16 2s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2V2zm18 14s2 0 2 2-2 2-2 2h-2s-2 0-2-2 2-2 2-2h2zM4 16s2 0 2 2-2 2-2 2H2s-2 0-2-2 2-2 2-2h2zm5.121-8.707s1.414 1.414.0 2.828-2.828.0-2.828.0L4.878 8.708s-1.414-1.414.0-2.829c1.415-1.414 2.829.0 2.829.0l1.414 1.414zm21 21s1.414 1.414.0 2.828-2.828.0-2.828.0l-1.414-1.414s-1.414-1.414.0-2.828 2.828.0 2.828.0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zM16 32s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2v-2z"/><circle fill="#ffd983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg></button></div></div></div></nav><main><div class=container><article><header class=article-header><div class=thumb><div><h1>Deploying discord bots written in Kotlin to Heroku</h1><div class=post-meta><div>By Jia Hao (jiāháo) | <time>April 21, 2020</time>
| 8 minutes</div><div class=tags><a href=/tags/kotlin/>Kotlin</a>
<a href=/tags/heroku/>Heroku</a>
<a href=/tags/discord-bot/>Discord Bot</a>
<a href=/tags/deployment/>Deployment</a>
<a href=/tags/tutorial/>Tutorial</a>
<a href=/tags/guide/>Guide</a></div></div></div></div></header></article><div class=article-post><p>Over my time in TPH, I have noticed that a common woe aspiring bot developers have is that they are unable to host
their Discord bot online as they may not have access to a credit card.</p><h2 id=introducing-heroku><a href=#introducing-heroku class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Introducing Heroku!</h2><p>While the official Discord bots used in TPH - like HotBot - is hosted via paid platforms, there are free alternatives
to deploying your bot online. This is where Heroku comes into the picture!</p><blockquote><p>Heroku is a cloud platform that lets companies build, deliver, monitor and scale apps — we&rsquo;re the fastest way to
go from idea to URL, bypassing all those infrastructure headaches.</p></blockquote><p>Heroku&rsquo;s free tier does not require any credit card information and has sufficient uptime for your basic bot
development needs and it is a great starting place to understand hosting.</p><h2 id=how-does-heroku-work><a href=#how-does-heroku-work class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>How does Heroku work?</h2><p>Before diving into setting up a Discord bot on Heroku, it is best to explain how Heroku is used. Heroku relies on the
Git version control system (VCS) to manage an application. This means that it integrates well with any existing projects
that already use Git. Do not fret, even if your application does not use Git, the configuration and setup for Heroku is
still simple.</p><p>By using Git, Heroku receives the project files directly and it is responsible for building the project. This is unlike
other hosting platforms where you would often only supply the final executable - a <code>.jar</code> file in our case - to the
hosting platform to run.</p><p>In order for Heroku to understand how it will build and deploy your application, you must provide a <code>Procfile</code>.</p><p>The <code>Procfile</code> is comprised of two key components - the dyno to run the application on and the commands to run your
application.</p><p>According to the <a href=https://www.heroku.com/dynos>Heroku documentation on dynos</a>, dynos are containers that are used to
run and scale all Heroku applications. Rather than worrying about configuring your build environment or OS, you can
focus on building your applications and allowing Heroku to take over the build and deployment process. For all
Discord bots, we will use a <strong>worker</strong> dyno.</p><p>The build commands we supply correspond to the build commands we use to run our bots locally.</p><p>As Heroku uses the project files to determine the type of tools we are using, we do not need to specify the
instructions to create the executable. In our case, since we are using Maven, it can intelligently detect the
<code>pom.xml</code> file and create the <code>.jar</code> accordingly. This leaves us with only the run commands to include in our <code>Procfile</code>
.</p><p>Finally, to tighten security, we will store all bot tokens in Heroku&rsquo;s
<a href=https://devcenter.heroku.com/articles/config-vars>config vars.</a> From a code perspective, these config vars are simply
environment variables available to our applications. This allows us to load our bot token during runtime and prevent
the bot token from being leaked.</p><p>Thus, we can define our deployment plan as such:</p><ol><li>Initialise the codebase as a Git repository</li><li>Create a Heroku application for the bot</li><li>Create a <code>Procfile</code> to supply instructions for Heroku to run the bot</li><li>Store the bot token as a config var to be used by your bot</li></ol><p>What I have just presented is a general overview of Heroku as a hosting platform. I will be diving into the
implementation
in the following sections.</p><h2 id=getting-started><a href=#getting-started class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Getting started</h2><p>For this article, I will be using a very simple Discord bot written in Kotlin. I have chosen to use JDA as the focus of
this guide is to understand Heroku. The code repository can be found
<a href=https://github.com/woojiahao/discord-heroku-deployment-demo>here.</a></p><p>If you wish to follow along, you can get the repository via</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git clone https://github.com/woojiahao/discord-heroku-deployment-demo ping-bot
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> ping-bot/
</span></span></code></pre></td></tr></table></div></div><p>Aside from that, basic understanding of the following is good to have to understand the technical details of this guide.</p><ol><li><a href=https://git-scm.com/book/en/v2>Git</a> - version control system that integrates with Heroku to enable easy deployments</li><li><a href=http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html>Maven</a> - build tool for Kotlin to
manage application dependencies</li></ol><p>In Kotlin/Java, we are looking to create a <code>.jar</code> file. This <code>.jar</code> file can be thought of like a <code>.exe</code> file.
Essentially, it bundles the application and allows us to run our bot without having to fire up an IDE.</p><p>To create this <code>.jar</code> file, we will use Maven. For more information about using Maven to create <code>.jar</code> files, refer to
<a href=http://tutorials.jenkov.com/maven/maven-build-fat-jar.html>this</a> guide.</p><p>With the formalities out of the way, let&rsquo;s get down to deploying our bot.</p><h2 id=installing-heroku><a href=#installing-heroku class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Installing Heroku</h2><p>You will have to install Heroku onto your machine to execute the following commands in the command line. You can find
the installation instructions for Heroku <a href=https://devcenter.heroku.com/articles/heroku-cli>here</a>.</p><p>To ensure that you have installed Heroku successfully, run <code>heroku --version</code>. My version of Heroku is
<code>heroku/7.39.2 linux-x64 node-v13.12.0</code></p><h2 id=setup-a-git-repository><a href=#setup-a-git-repository class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Setup a Git repository</h2><p>As mentioned earlier, we need to ensure that our application is a Git repository for Heroku to work.</p><p>While it is recommended
to <a href=https://help.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line>publish your repository to GitHub</a> (
or any other version control website), it is not necessary
for deploying your applicaiton to Heroku.</p><p>If you are using the sample bot, it is already a Git repository.</p><p>If you are deploying your own bot, initialise a repository by using the following command inside the root folder of your
codebase.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git init
</span></span></code></pre></td></tr></table></div></div><h2 id=create-a-new-heroku-application><a href=#create-a-new-heroku-application class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Create a new Heroku application</h2><p>Then, we want to create a Heroku application.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ heroku create <span class=o>[</span>project name<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>The project name is optional and will be automatically generated if not provided. It is recommended that you give a name
to be organised.</p><p>To ensure that the Heroku application has been created, run the <code>git remote -v</code> command to list the remotes of your
repository. Should your application have been created successfully, you will see a new remote added linking to a Heroku
Git remote.</p><p><img loading=lazy src=/post/deploying-discord-bot-kotlin/git-remote.png alt="Results of git remote -v" width=1086 height=352></p><p>With the Heroku application created, we can begin configuring our repository to deploy to Heroku.</p><h2 id=creating-a-procfile><a href=#creating-a-procfile class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Creating a Procfile</h2><p>As explained earlier, the <code>Procfile</code> acts as a build instruction manual for our application. It instructs Heroku how we
want to run our application. Heroku takes over the rest and helps with managing our build environment.</p><p>For my sample bot, the <code>Procfile</code> looks like this:</p><pre tabindex=0><code>worker: java -jar target/Bot.jar
</code></pre><p>Let&rsquo;s breakdown this file. We first declare the dyno type as <code>worker</code>. Then, we specify the command to run our <code>.jar</code>
file.</p><p>Heroku is able to intelligently detect that our Kotlin application uses Maven as a build tool and runs the
<code>mvn clean install</code> command to create our <code>Bot.jar</code> file. Then, it will use the commands in the <code>Procfile</code> to run the
application.</p><h2 id=securing-discord-bot-tokens><a href=#securing-discord-bot-tokens class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Securing Discord bot tokens</h2><p>A Discord bot requires a token to run.</p><p>You can obtain this bot token when you make a new Discord bot from the Discord
<a href=https://discordpy.readthedocs.io/en/latest/discord.html>developer dashboard</a>.
However, you do not want to expose this token in your repository as this would mean that others could launch and
access your bot.</p><p>As mentioned earlier, we will make use of Heroku&rsquo;s <a href=https://devcenter.heroku.com/articles/config-vars>config vars</a> to
safely store and access this token.</p><p>We will add our bot&rsquo;s token as an environment variable and use <code>System.getenv()</code> method to retrieve this value.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ heroku config:set <span class=nv>BOT_TOKEN</span><span class=o>=</span>&lt;bot token&gt;
</span></span></code></pre></td></tr></table></div></div><p>Inside the <code>Bot.kt</code> file, you will find the following lines in the <code>main()</code> function.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>val</span> <span class=py>token</span> <span class=p>=</span> <span class=nc>System</span><span class=p>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&#34;BOT_TOKEN&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=o>?:</span> <span class=k>throw</span> <span class=n>Exception</span><span class=p>(</span><span class=s2>&#34;Must include bot token in environment variable for bot to run&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>This will retrieve the corresponding environment variable that we have stored in Heroku. If there is no environment
variable present, we will stop the bot from launching and display an error.</p><p>An additional benefit of storing our bot tokens as an environment variable is that we are able to store the bot token
locally as an environment variable which streamlines our development process as we could have a separate token used
for a development/testing bot.</p><h2 id=launching-the-bot><a href=#launching-the-bot class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Launching the bot</h2><p>After configuring everything, commit all the changes to your project, and push it to the <code>heroku</code> remote.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git add .
</span></span><span class=line><span class=cl>$ git commit -am <span class=s2>&#34;Setup Heroku&#34;</span>
</span></span><span class=line><span class=cl>$ git push heroku master
</span></span></code></pre></td></tr></table></div></div><p>If you encounter a problem with pushing to the <code>heroku</code> remote, use the command <code>heroku logs --tail</code> and find the
latest error messages to debug any errors.</p><p>After pushing the changes, Heroku will build your application. However, it is not online yet as you have to scale
your application. This tells Heroku how many instances of your application you wish to run. For our case, we can go
with one worker dyno.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ heroku ps:scale <span class=nv>worker</span><span class=o>=</span><span class=m>1</span>
</span></span></code></pre></td></tr></table></div></div><p>You can now invite your bot to a server and test it out. If you&rsquo;re using the sample PingBot, you can use <code>!ping</code> and
expect the bot to respond with <code>Pong!</code>.</p><h2 id=now-what><a href=#now-what class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Now what?</h2><p>Congratulations! You have just deployed a Discord bot onto Heroku! When you make changes to the bot, you are free to
commit and push those changes to the <code>heroku</code> remote to update the bot that is online.</p><p>Here are some tips for developing with Heroku.</p><ol><li>While working on your development copy of the bot, it is recommended that you obtain a seprate bot token and
attach it as an environment variable to your local development environment. Doing so allows you to maintain your
bot&rsquo;s uptime while making changes.</li><li>If you encounter any errors or your bot is not responding, use the <code>heroku logs --tail</code> command to view the logs
of your application. Doing so allows you to check if there were any errors while running your project.</li><li>If you require persistent storage, Heroku comes with a free tier plugin for
<a href=https://www.heroku.com/postgres>PostgreSQL.</a> Heroku - by default - has ephemeral storage, meaning it does not
maintain new files after each build.</li></ol><h2 id=conclusion><a href=#conclusion class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Conclusion</h2><p>Heroku offers a free alternative to many hosting platforms and is a perfect platform for aspiring bot developers to
begin.</p><p>More resources on hosting JVM-based applications on Heroku:</p><ul><li><a href=https://devcenter.heroku.com/articles/getting-started-with-java#introduction>Getting Started on Heroku with Java</a></li><li><a href=https://github.com/heroku/java-sample>Java Sample (on GitHub)</a></li></ul></div></div><div class=container><nav class="flex container suggested"><a rel=prev href=/post/gatsby-gh-pages/ title="Previous post (older)"><span>Previous</span>
Gatsby.js + GitHub Actions + GitHub Pages = Match Made in Heaven?
</a><a rel=next href=/post/software-projects-truth/ title="Next post (newer)"><span>Next</span>
The truth behind software projects</a></nav></div><div class=container><div class=disqus-container></div><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script></div></main></main><footer class="footer flex"><section class=container><nav class=footer-links><a href=https://woojiahao.com>About Me</a>
<a href=/index.xml>RSS</a></nav></section><script defer src=/ts/features.706a523ba43e6d0427c7fdf2b9d05dbd0920d3f12942b453690b495cb2522743.js data-enable-footnotes=true></script></footer></body></html>