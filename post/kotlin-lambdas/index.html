<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=theme-color content="dark"><title>Familiarising yourself with lambdas in Kotlin | jiahao.blog</title>
<meta property="og:site_name" content="jiahao.blog"><meta property="og:title" content="Familiarising yourself with lambdas in Kotlin | jiahao.blog"><meta itemprop=name content="Familiarising yourself with lambdas in Kotlin | jiahao.blog"><meta name=twitter:title content="Familiarising yourself with lambdas in Kotlin | jiahao.blog"><meta name=application-name content="Familiarising yourself with lambdas in Kotlin | jiahao.blog"><meta name=twitter:card content="summary"><meta name=description content="Ramblings and musings of Jia Hao (jiāháo) - software engineer, Elixir enthusiast, technical author, and all around tech nerd!"><meta name=twitter:description content="Ramblings and musings of Jia Hao (jiāháo) - software engineer, Elixir enthusiast, technical author, and all around tech nerd!"><meta itemprop=description content="Ramblings and musings of Jia Hao (jiāháo) - software engineer, Elixir enthusiast, technical author, and all around tech nerd!"><meta property="og:description" content="Ramblings and musings of Jia Hao (jiāháo) - software engineer, Elixir enthusiast, technical author, and all around tech nerd!"><meta property="og:type" content="article"><meta property="article:publisher" content="Jia Hao (jiāháo)"><meta property="og:article:published_time" content=2018-10-28T00:00:00Z><meta property="article:published_time" content=2018-10-28T00:00:00Z><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Familiarising yourself with lambdas in Kotlin","author":{"@type":"Person","name":"Jia Hao (jiāháo)"},"datePublished":"2018-10-28","description":"","wordCount":1306,"mainEntityOfPage":"True","dateModified":"2018-10-28","publisher":{"@type":"Organization","name":"Jia Hao (jiāháo)","logo":{"@type":"imageObject","url":"https:\/\/blog.woojiahao.com\/favicon.ico"}}}</script><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=stylesheet href=/sass/main.min.ab99ff095f832511e24ffb2fba2b51ad473b2f7e9301d674eba2c6c3a6e8bd81.css></head><script>(function(){const e="ThemeColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="ThemeColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.userColorScheme="dark":document.documentElement.dataset.userColorScheme="light"})()</script><body class=dark><nav class=navbar><div class=container><div class=flex><div><a class=brand href=/><span class=emoji>☃️
</span>jiahao.blog</a></div><div class=flex><a href=/articles/>Articles</a>
<button id=dark-mode-button><svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163.0 101.643 1.641 1.163 1.163.0 00-1.643-1.641zm-16.022 14.38a1.74 1.74.0 000 2.465 1.742 1.742.0 100-2.465zm13.968-2.147a2.904 2.904.0 01-4.108.0 2.902 2.902.0 010-4.107 2.902 2.902.0 014.108.0 2.902 2.902.0 010 4.107z" fill="#ffcc4d"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg><svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M16 2s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2V2zm18 14s2 0 2 2-2 2-2 2h-2s-2 0-2-2 2-2 2-2h2zM4 16s2 0 2 2-2 2-2 2H2s-2 0-2-2 2-2 2-2h2zm5.121-8.707s1.414 1.414.0 2.828-2.828.0-2.828.0L4.878 8.708s-1.414-1.414.0-2.829c1.415-1.414 2.829.0 2.829.0l1.414 1.414zm21 21s1.414 1.414.0 2.828-2.828.0-2.828.0l-1.414-1.414s-1.414-1.414.0-2.828 2.828.0 2.828.0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zM16 32s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2v-2z"/><circle fill="#ffd983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg></button></div></div></div></nav><main><div class=container><article><header class=article-header><div class=thumb><div><h1>Familiarising yourself with lambdas in Kotlin</h1><div class=post-meta><div>By Jia Hao (jiāháo) | <time>October 28, 2018</time>
| 7 minutes</div><div class=tags><a href=/tags/kotlin/>Kotlin</a>
<a href=/tags/lambda/>Lambda</a>
<a href=/tags/functional-programming/>Functional Programming</a></div></div></div></div></header></article><div class=article-post><p>Kotlin is a language that was built on top of the JVM and what really sets it apart from Java is the emphasis on
<strong>functions being a first-class construct</strong>, meaning many fancy things like lambdas are directly available to Kotlin
developers without having to include bulky constructs like the concept of <em>functional interfaces</em>.</p><h2 id=what-are-lambdas><a href=#what-are-lambdas class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>What are lambdas?</h2><p>In my article on <a href=https://woojiahao.github.io/Diving-Into-Streams/>Diving Into Streams,</a> I explained how lambdas
were this miraculous constructs in Java that removed a lot of the boilerplate required when passing behavior from one
method to another.</p><p>However, this definition was really under the assumption of pure Java. Lambdas, as a whole, are a mathematical concept.
In programming, a lambda can be seen as a &ldquo;portable&rdquo; function or a piece of behavior that can be passed around and used
accordingly.</p><h3 id=then-what-are-functions><a href=#then-what-are-functions class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Then, what are functions?</h3><p>Functions are simply pieces of behavior that take in some input (or none at all) and return some output (or none at all)
,
this is very much the same as the mathematical concept it is based off of.</p><h2 id=a-case-for-lambdas><a href=#a-case-for-lambdas class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>A case for lambdas</h2><h3 id=scenario><a href=#scenario class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Scenario:</h3><p>Say you were working in a performance-critical situation and you just discovered that there is a major memory issue with
a function and it is causing some major performance drawbacks and you want to see how long it takes to benchmark and
fix this issue.</p><p><em>&ldquo;No biggie, I can take the time before and after the execution and check how long that took to benchmark the function&rdquo;</em>
would be something you are thinking to yourself and that would be true in a simple case like ours.</p><p>You begin to write some code to test this function:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>fun</span> <span class=nf>foo</span><span class=p>(</span><span class=n>upper</span><span class=p>:</span> <span class=n>Int</span><span class=p>):</span> <span class=n>Int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>var</span> <span class=py>sum</span> <span class=p>=</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span><span class=p>(</span><span class=n>i</span> <span class=k>in</span> <span class=m>1.</span><span class=p>.</span><span class=n>upper</span><span class=p>)</span> <span class=n>sum</span> <span class=o>+=</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>sum</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>fun</span> <span class=nf>main</span><span class=p>(</span><span class=n>main</span><span class=p>:</span> <span class=n>Array</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>val</span> <span class=py>before</span> <span class=p>=</span> <span class=nc>System</span><span class=p>.</span><span class=n>currentTimeMillis</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=n>println</span><span class=p>(</span><span class=s2>&#34;foo returns: </span><span class=si>${foo(10000)}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>val</span> <span class=py>after</span> <span class=p>=</span> <span class=nc>System</span><span class=p>.</span><span class=n>currentTimeMillis</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=n>println</span><span class=p>(</span><span class=s2>&#34;foo took </span><span class=si>${after - before}</span><span class=s2>ms to run&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Awesome! It worked, you can now go on your merry way and fix the bug. Then you manager comes around and tells you yet
<em>another</em> performance issue was found and you think <em>&ldquo;Eh, this is kind of tedious to redo so I guess I could copy-paste
the code I made earlier&rdquo;</em>.</p><p>Now, would you be able to continually repeat this if you suddenly had a whole class of functions that needed to be
tested?</p><h3 id=lambdas-to-the-rescue><a href=#lambdas-to-the-rescue class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Lambdas to the rescue!</h3><p>Going back to how I mentioned how a lambda is <code>a "portable" function or a piece of behavior that can be passed around and used accordingly.</code></p><p>In this scenario, we ideally, would want to have a function that can time <strong>any</strong> function with a method signature like
<code>foo()</code> and this timing function would not need to know anything about the function it receives, all it needs to know
it that it should calculate the time before and after this function took to run and print that out, nicely formatted.</p><p>Some basic pseudo-code would look like this:</p><table><thead><tr><th></th><th>Details</th></tr></thead><tbody><tr><td>Input</td><td>{::nomarkdown}<ol><li>Name of the function</li><li>Function to be timed</li></ol>{:/}</td></tr><tr><td>Output</td><td>None, this function will make use of a side effect</td></tr><tr><td>Steps</td><td>{::nomarkdown}<ol><li>Take the time before running the function</li><li>Run the function</li><li>Take the time after running the function</li><li>Print out the difference between the before and after, this will be total time it took to for the function to run</li></ol>{:/}</td></tr></tbody></table><h4 id=defining-structure><a href=#defining-structure class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Defining structure</h4><p>In Kotlin, in order to declare a lambda, you have to declare a <em>function type</em>, or some kind of contract for the
functions to be passed to follow. To simplify things, all the memory leaks that have surfaced all take in exactly 1 Int
input and return an Int, so the function type for this case would look something like:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=n>func</span><span class=p>:</span> <span class=p>(</span><span class=n>Int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Int</span>
</span></span></code></pre></td></tr></table></div></div><p>Note how the function type is literally just the method signature of a potential function without the parameter names.
As mentioned previously, these function types are merely just contracts, it defines what a function to be passed in
should
look like, it does not dictate what the inputs will be used for (generally what the parameter names represent) nor does
it dictate the specific behaviors of this function.</p><h4 id=creating-the-timing-function><a href=#creating-the-timing-function class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Creating the timing function</h4><p>Now that we have the general structure of the function we want to be able to time, we can then proceed with declaring
the
function body of this timer.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>fun</span> <span class=nf>functionTimer</span><span class=p>(</span><span class=n>name</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=n>upper</span><span class=p>:</span> <span class=n>Int</span><span class=p>,</span> <span class=n>func</span><span class=p>:</span> <span class=p>(</span><span class=n>Int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>val</span> <span class=py>before</span> <span class=p>=</span> <span class=nc>System</span><span class=p>.</span><span class=n>currentTimeMillis</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>println</span><span class=p>(</span><span class=s2>&#34;</span><span class=si>$name</span><span class=s2> returned </span><span class=si>${func(upper)}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>val</span> <span class=py>after</span> <span class=p>=</span> <span class=nc>System</span><span class=p>.</span><span class=n>currentTimeMillis</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>println</span><span class=p>(</span><span class=s2>&#34;</span><span class=si>$name</span><span class=s2> took </span><span class=si>${after - before}</span><span class=s2>ms to run&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>As you can see, this function&rsquo;s body is very much the same as the original method of timing the function in the <code>main</code>
method. However, whilst there were some similarities, the benefits of creating a specialized function for timing is as
follows:</p><ol><li><strong>Modularity</strong> - your code is now modular and can be reused if needed</li><li><strong>Flexible</strong> - because this is a function, you can apply consistent changes to the timing and the changes made will
be reflected in any function timed by this function made</li><li><strong>Abstraction</strong> - a new user of your codebase does not need to think about how a function is timed, all they need to
know is how to call this timing function and they know that this function will help to time and do everything for
them</li><li><strong>Consistency</strong> - we can remove the <code>upper</code> argument and apply a consistent argument to be passed to <code>func</code> so that
the timing is not skewed by changes in the upper, thus ensuring a degree of consistency</li></ol><h4 id=timing-things><a href=#timing-things class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Timing things</h4><p>With the newly made timing function, we can then begin to time how long each function took in our class. Let&rsquo;s begin
with
the first function we tested, which simply added a bunch of numbers from 1 up till an upper value.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>fun</span> <span class=nf>main</span><span class=p>(</span><span class=n>args</span><span class=p>:</span> <span class=n>Array</span><span class=p>&lt;</span><span class=n>String</span><span class=p>&gt;)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>functionTimer</span><span class=p>(</span><span class=s2>&#34;add&#34;</span><span class=p>,</span> <span class=m>10000</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>var</span> <span class=py>sum</span> <span class=p>=</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=k>in</span> <span class=m>1.</span><span class=p>.</span><span class=k>it</span><span class=p>)</span> <span class=n>sum</span> <span class=o>+=</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>    <span class=n>sum</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>What we have used is the lambda syntax Kotlin provides. We declare the arguments of the <code>functionTimer</code> function as per
usual, but we then use <code>{}</code> which houses the body of the function. We also use the <code>it</code> keyword, to refer to the one and
only input this lambda receives, which we can assume would be the upper limit (in this case, <em>10000</em>).</p><p>Another thing to note is we omit the <code>return</code> keyword from the lambda body even though the function type specifies that
each function has to return an <code>Int</code>. We simply put the value to be returned on a line of its own and Kotlin is clever
enough to know to return this value.</p><p>Now, we can extend this function to work with any other function that takes in a single Int input and return an Int&mldr;</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=n>functionTimer</span><span class=p>(</span><span class=s2>&#34;multiply&#34;</span><span class=p>,</span> <span class=m>100</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>var</span> <span class=py>result</span> <span class=p>=</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=k>in</span> <span class=m>2.</span><span class=p>.</span><span class=k>it</span><span class=p>)</span> <span class=n>result</span> <span class=o>*=</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>  <span class=n>result</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>functionTimer</span><span class=p>(</span><span class=s2>&#34;wacky&#34;</span><span class=p>,</span> <span class=m>1000</span><span class=p>)</span> <span class=p>{</span> <span class=p>(</span><span class=m>1.</span><span class=p>.</span><span class=k>it</span><span class=p>).</span><span class=n>map</span> <span class=p>{</span> <span class=n>num</span> <span class=o>-&gt;</span> <span class=n>num</span> <span class=p>*</span> <span class=m>3</span> <span class=p>}.</span><span class=n>sum</span><span class=p>()</span> <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Sample output:</strong></p><pre tabindex=0><code>add returned 50005000
add took 1ms to run
multiply returned 0
multiply took 0ms to run
wacky returned 1501500
wacky took 58ms to run
</code></pre><p>You can see how flexible we can make this timer be, taking in all sorts of functions and timing them.</p><h4 id=timing-existing-functions><a href=#timing-existing-functions class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Timing existing functions</h4><p>Sometimes, you might not want to rewrite a long function just to time it, and that is perfectly fine, you can pass a
reference to an existing method for it to be run as such:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=n>functionTimer</span><span class=p>(</span><span class=s2>&#34;add&#34;</span><span class=p>,</span> <span class=m>10000</span><span class=p>,</span> <span class=o>::</span><span class=n>add</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=conclusion><a href=#conclusion class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Conclusion</h2><p>Lambdas are far more than just useful for timing stuff, it is extremely versatile and Kotlin uses them extensively
throughout their language, in Collections to APIs that leverage off the design of lambdas.</p><p>Some resources for further reading:</p><ul><li><a href=https://kotlinlang.org/docs/reference/lambdas.html>Kotlin documentation</a></li><li><a href=https://www.baeldung.com/kotlin-lambda-expressions>Baeldung</a></li></ul></div></div><div class=container><nav class="flex container suggested"><a rel=prev href=/post/diving-into-streams/ title="Previous post (older)"><span>Previous</span>
Diving into (Java) streams
</a><a rel=next href=/post/java-generics/ title="Next post (newer)"><span>Next</span>
An investigation into generics in Java</a></nav></div><div class=container><div class=disqus-container></div><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script></div></main></main><footer class="footer flex"><section class=container><nav class=footer-links><a href=https://woojiahao.com>About Me</a>
<a href=/index.xml>RSS</a></nav></section><script defer src=/ts/features.706a523ba43e6d0427c7fdf2b9d05dbd0920d3f12942b453690b495cb2522743.js data-enable-footnotes=true></script></footer></body></html>