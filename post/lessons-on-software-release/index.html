<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=theme-color content="dark"><title>Lessons on software release | jiahao.blog</title><meta property="og:site_name" content="jiahao.blog"><meta property="og:title" content="Lessons on software release | jiahao.blog"><meta itemprop=name content="Lessons on software release | jiahao.blog"><meta name=twitter:title content="Lessons on software release | jiahao.blog"><meta name=application-name content="Lessons on software release | jiahao.blog"><meta name=twitter:card content="summary"><meta name=description content="Lessons about software development and release from developing kMD2PDF - a markdown to PDF file converter"><meta name=twitter:description content="Lessons about software development and release from developing kMD2PDF - a markdown to PDF file converter "><meta itemprop=description content=" Lessons about software development and release from developing kMD2PDF - a markdown to PDF file converter "><meta property="og:description" content=" Lessons about software development and release from developing kMD2PDF - a markdown to PDF file converter "><meta property="og:type" content="article"><meta property="article:publisher" content="Jia Hao"><meta property="og:article:published_time" content="2019-04-03T00:00:00Z"><meta property="article:published_time" content="2019-04-03T00:00:00Z"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Lessons on software release","author":{"@type":"Person","name":"Jia Hao"},"datePublished":"2019-04-03","description":"Lessons about software development and release from developing kMD2PDF - a markdown to PDF file converter","wordCount":1103,"mainEntityOfPage":"True","dateModified":"2019-04-03","publisher":{"@type":"Organization","name":"Jia Hao","logo":{"@type":"imageObject","url":"https:\/\/blog.woojiahao.com\/favicon.ico"}}}</script><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=stylesheet href=/sass/main.min.ab99ff095f832511e24ffb2fba2b51ad473b2f7e9301d674eba2c6c3a6e8bd81.css></head><script>(function(){const e="ThemeColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="ThemeColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.userColorScheme="dark":document.documentElement.dataset.userColorScheme="light"})()</script><body class=dark><nav class=navbar><div class=container><div class=flex><div><a class=brand href=/><span class=emoji>☃️</span>
jiahao.blog</a></div><div class=flex><a href=/articles/>Articles</a>
<button id=dark-mode-button><svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163.0 101.643 1.641 1.163 1.163.0 00-1.643-1.641zm-16.022 14.38a1.74 1.74.0 000 2.465 1.742 1.742.0 100-2.465zm13.968-2.147a2.904 2.904.0 01-4.108.0 2.902 2.902.0 010-4.107 2.902 2.902.0 014.108.0 2.902 2.902.0 010 4.107z" fill="#ffcc4d"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg><svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M16 2s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2V2zm18 14s2 0 2 2-2 2-2 2h-2s-2 0-2-2 2-2 2-2h2zM4 16s2 0 2 2-2 2-2 2H2s-2 0-2-2 2-2 2-2h2zm5.121-8.707s1.414 1.414.0 2.828-2.828.0-2.828.0L4.878 8.708s-1.414-1.414.0-2.829c1.415-1.414 2.829.0 2.829.0l1.414 1.414zm21 21s1.414 1.414.0 2.828-2.828.0-2.828.0l-1.414-1.414s-1.414-1.414.0-2.828 2.828.0 2.828.0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zM16 32s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2v-2z"/><circle fill="#ffd983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg></button></div></div></div></nav><main><div class=container><article><header class=article-header><div class=thumb><div><h1>Lessons on software release</h1><div class=post-meta><div>By Jia Hao | <time>April 03, 2019</time>
| 6 minutes</div><div class=tags><a href=/tags/reflection/>reflection</a>
<a href=/tags/kotlin/>Kotlin</a>
<a href=/tags/markdown/>markdown</a>
<a href=/tags/pdf/>PDF</a>
<a href=/tags/converter/>converter</a>
<a href=/tags/software-engineering/>software engineering</a>
<a href=/tags/kmd2pdf/>kMD2PDF</a></div></div></div></div></header></article><div class=article-post><p>Oh boy, I screwed up bad, like <em>really</em> badly. Ok ok, let&rsquo;s go back and see where it all began. I&rsquo;ve learnt countless
lessons from this and I hope you (reader) will too if you&rsquo;re developing your own software.</p><h2 id=story-time><a href=#story-time class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Story time!</h2><p>2 months ago, I embarked on a journey to write a markdown to PDF converter, called
<a href=https://omnius-project.github.io/kMD2PDF>kMD2PDF</a>. The initial architecture was developed such that:</p><pre tabindex=0><code>.md file -&gt; .html file + .css styling -&gt; .pdf
</code></pre><p>In order to facilitate this system, I used 2 libraries:</p><ol><li><code>commonmark-java</code> - this facilitated with the <code>.md -> .html</code> conversion</li><li><code>flyingsaucer</code> - this facilitated with the <code>.html -> .pdf</code> conversion</li></ol><p>In between, I used my own code to create a style DSL to generate the CSS styling. This system worked nicely as I was
able to create an easy to use API for developers using this library.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>fun</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>val</span> <span class=py>document</span> <span class=p>=</span> <span class=n>MarkdownDocument</span><span class=p>(</span><span class=s2>&#34;~/Desktop/README.md&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>val</span> <span class=py>convert</span> <span class=p>=</span> <span class=n>markdownConverter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>document</span><span class=p>(</span><span class=n>document</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=n>converter</span><span class=p>.</span><span class=n>convert</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=failure-to-research><a href=#failure-to-research class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Failure to research</h3><p><strong>However,</strong> I made several big oversights. I failed to plan that the libraries I used were severely limited in what
they could offer. For instance, <code>commonmark-java</code> does not support task list items, even as an extension and in order
to implement this feature, I had to create a custom <code>NodeRenderer</code> that would convert bullet lists to task list items
if necessary. Then I realised that because I overrode the default rendering behavior of the bullet lists, I no longer
could create nested lists, so I had to remedy that myself and soon, the project became a bunch of band-aids stuck on
top of the library and it caused the project to steer into a direction of just bug fix upon bug fix, as I attempted to
introduce features into a tightly-coupled system. This made for an incredibly hard time working on the library as I was
de-motivated to implement features since they would result in a mess.</p><p>Worst still, as I researched more libraries for handling markdown parsing, I noticed that there were libraries like
Flexmark that <em>did</em> provide the support for the features I wanted such as task lists without requiring a lot of hacky
work to be performed to the existing library.</p><p>Similarly, a big hurdle I had to cross with flyingsaucer was getting HTML5 xml code to render as the library required
only XML or XHTML documents. This was a huge bottleneck because now some elements render incorrectly and others
require even longer HTML that isn&rsquo;t always necessary. That&rsquo;s where I discovered OpenHTMLToPDF, which had a similar API
to flyingsaucer but it allowed for HTML5 code and it doesn&rsquo;t constrict users by forcing them to use XHTML (for the
uninitiated, XHTML is a stricter form of HTML, where single-enclosed tags are not permitted, rather, every tag must be
closed off with an ending tag).</p><p>This failure to plan ahead and research properly made my life hell as I spent most of my time fixing issues I created
for myself.</p><h3 id=over-committing><a href=#over-committing class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Over committing</h3><p>Another issue I had stupidly created for myself is over-committing to creating a huge feature push. Initially, after
releasing version 0.1.2, I started work on version 0.2.0 - where many new features would come, along with a set of
changes to the existing API to improve the lives of developers. But&mldr; that&rsquo;s where I failed to realise that I had
bitten off more than I could chew.</p><p>For an entire month, I focussed my efforts on trying to make version 0.2.0 feature complete. And within this period of
time, the stable version of the library never once got updated. This spelt bad news for those who are using 0.1.2 as
they are waiting for over a month for a newer library, whilst they&rsquo;re stuck with a bug-filled library. It also meant
that I would burn out quickly working on the library as I tried pushing to complete the features by an arbitrary
deadline.</p><p>This caused me to be extremely stressed when users of the library would hound me for changes. However, during this
month, I did learn a lot about Kotlin and software development so it wasn&rsquo;t a complete waste of time. I just know it
could have been so much better and smoother.</p><p>This is where I also begin to see the value of Agile development, where we should break up the development into
deliverables across weeks to reduce the workload and to improve the end user experience.</p><h3 id=no-testing><a href=#no-testing class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>No testing</h3><p>An area lacking in the library is unit testing. As the markdown can have many corner cases, it&rsquo;s hard to cater to each
of these. The lack of unit tests meant that the bugs I encounter are always by accident, rather than the result of
methodical checking and testing to ensure that nothing slips the radar.</p><p>Backtracking to unit test everything is also a pain as by this point, I would have forgotten about some of the classes.</p><h2 id=learning-points><a href=#learning-points class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Learning points</h2><p>So what exactly did I take away from this experience and how will I be improving my approach. I&rsquo;ve learnt to be more
methodical with my research before starting a project, I should carefully scope for the best libraries and options
available for the job. I&rsquo;ve also come to realise just how key portioning work and creating frequent deliverables is to
developing good software. Finally, I&rsquo;ve learnt to use TDD or at least, unit test my code as I write them, rather than
leaving it till the last minute.</p><p>So what exactly does this mean for kMD2PDF? Well, I&rsquo;ll begin by announcing several changes to my workflow. First and
foremost, I&rsquo;ll be porting my codebase to use Flexmark and OpenHTMLToPDF over the next few releases, so that&rsquo;s exciting!
Secondly, I&rsquo;ll shorten the release cycle to have new versions of the library be released every 2 weeks where the
versioning will go from <code>0.2.0</code> to <code>0.2.1</code> etc. Each release will contain a few features and fixes and the goal is to
make the library stable and ready to use as frequently as possible. Lastly, I&rsquo;ll begin to rolling out a suite of unit
tests for the codebase. I&rsquo;ll adopt TDD in my workflow and hopefully, I can reach > 80% code coverage before version
1.0.0.</p><p>Whilst I&rsquo;m incredibly frustrated about my set backs, I will not allow them to hinder the development and progress of
the library and with a new found resolve to achieve better things, I&rsquo;ll be taking on each new challenge with pride. I
have also greatly enjoyed the past month learning various skills and practicing Kotlin.</p><p>If you&rsquo;re curious about the library, it can be found <a href=https://github.com/omnius-project/kMD2PDF>here.</a></p></div></div><div class=container><nav class="flex container suggested"><a rel=prev href=/post/java-generics/ title="Previous post (older)"><span>Previous</span>
An investigation into generics in Java</a>
<a rel=next href=/post/porting-flexmark/ title="Next post (newer)"><span>Next</span>
Porting to FlexMark</a></nav></div><div class=container><div class=disqus-container></div><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script></div></main></main><footer class="footer flex"><section class=container><nav class=footer-links><a href=https://woojiahao.com>Portfolio</a>
<a href=/index.xml>RSS</a></nav></section><script defer src=/ts/features.dd8e5b18a6dda91367e396fd8dc9b9f83a1993065f709a53e056e0f2e9096ea1.js data-enable-footnotes=true></script></footer></body></html>