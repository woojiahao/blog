<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=theme-color content="dark"><title>Heroku x Docker x Discord bot x Kotlin | jiahao.blog</title>
<meta property="og:site_name" content="jiahao.blog"><meta property="og:title" content="Heroku x Docker x Discord bot x Kotlin | jiahao.blog"><meta itemprop=name content="Heroku x Docker x Discord bot x Kotlin | jiahao.blog"><meta name=twitter:title content="Heroku x Docker x Discord bot x Kotlin | jiahao.blog"><meta name=application-name content="Heroku x Docker x Discord bot x Kotlin | jiahao.blog"><meta name=twitter:card content="summary"><meta name=description content="Deploying a JVM-based Discord bot through the Docker integration with Heroku"><meta name=twitter:description content="Deploying a JVM-based Discord bot through the Docker integration with Heroku "><meta itemprop=description content=" Deploying a JVM-based Discord bot through the Docker integration with Heroku "><meta property="og:description" content=" Deploying a JVM-based Discord bot through the Docker integration with Heroku "><meta property="og:type" content="article"><meta property="article:publisher" content="Jia Hao (jiāháo)"><meta property="og:article:published_time" content=2019-08-31T00:00:00Z><meta property="article:published_time" content=2019-08-31T00:00:00Z><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Heroku x Docker x Discord bot x Kotlin","author":{"@type":"Person","name":"Jia Hao (jiāháo)"},"datePublished":"2019-08-31","description":"Deploying a JVM-based Discord bot through the Docker integration with Heroku","wordCount":784,"mainEntityOfPage":"True","dateModified":"2019-08-31","publisher":{"@type":"Organization","name":"Jia Hao (jiāháo)","logo":{"@type":"imageObject","url":"https:\/\/blog.woojiahao.com\/favicon.ico"}}}</script><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=stylesheet href=/sass/main.min.ab99ff095f832511e24ffb2fba2b51ad473b2f7e9301d674eba2c6c3a6e8bd81.css></head><script>(function(){const e="ThemeColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="ThemeColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.userColorScheme="dark":document.documentElement.dataset.userColorScheme="light"})()</script><body class=dark><nav class=navbar><div class=container><div class=flex><div><a class=brand href=/><span class=emoji>☃️
</span>jiahao.blog</a></div><div class=flex><a href=/articles/>Articles</a>
<button id=dark-mode-button><svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163.0 101.643 1.641 1.163 1.163.0 00-1.643-1.641zm-16.022 14.38a1.74 1.74.0 000 2.465 1.742 1.742.0 100-2.465zm13.968-2.147a2.904 2.904.0 01-4.108.0 2.902 2.902.0 010-4.107 2.902 2.902.0 014.108.0 2.902 2.902.0 010 4.107z" fill="#ffcc4d"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg><svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M16 2s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2V2zm18 14s2 0 2 2-2 2-2 2h-2s-2 0-2-2 2-2 2-2h2zM4 16s2 0 2 2-2 2-2 2H2s-2 0-2-2 2-2 2-2h2zm5.121-8.707s1.414 1.414.0 2.828-2.828.0-2.828.0L4.878 8.708s-1.414-1.414.0-2.829c1.415-1.414 2.829.0 2.829.0l1.414 1.414zm21 21s1.414 1.414.0 2.828-2.828.0-2.828.0l-1.414-1.414s-1.414-1.414.0-2.828 2.828.0 2.828.0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zM16 32s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2v-2z"/><circle fill="#ffd983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg></button></div></div></div></nav><main><div class=container><article><header class=article-header><div class=thumb><div><h1>Heroku x Docker x Discord bot x Kotlin</h1><div class=post-meta><div>By Jia Hao (jiāháo) | <time>August 31, 2019</time>
| 4 minutes</div><div class=tags><a href=/tags/tutorial/>Tutorial</a>
<a href=/tags/guide/>Guide</a>
<a href=/tags/kotlin/>Kotlin</a>
<a href=/tags/heroku/>Heroku</a>
<a href=/tags/discord-bot/>Discord Bot</a>
<a href=/tags/docker/>Docker</a>
<a href=/tags/deployment/>Deployment</a></div></div></div></div></header></article><div class=article-post><p>You may be wondering what&rsquo;s up with the over the top, nearly fan-ship name, trust me, I was not on anything when I wrote
this.</p><p>I simply wanted to write about a playground project I had written to get Docker working with Heroku, specifically in the
context of writing a Discord bot in Kotlin.</p><p>I made a rather comprehensive guide to go with the project over on GitHub and I wish to share it here as well since it
was a rather large milestone.</p><p>If you wish to follow along, the sample project is found <a href=https://github.com/woojiahao/discord-docker>here.</a></p><p>The project uses Gradle as the build tool for the project.</p><h2 id=running-the-docker-image><a href=#running-the-docker-image class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Running the Docker image</h2><h3 id=local><a href=#local class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Local</h3><p>If you&rsquo;re running the bot locally, you should use Docker to package the bot and run the Docker image created. This way,
you can test your bot locally with the same environment as your server thanks to Docker!</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker build -t discord-docker .
</span></span><span class=line><span class=cl>$ docker image ls <span class=c1># Should see the image named &#34;discord-docker&#34;</span>
</span></span><span class=line><span class=cl>$ docker run -e <span class=nv>BOT_TOKEN</span><span class=o>=</span>&lt;bot token&gt; -d discord-docker
</span></span><span class=line><span class=cl>$ docker container ls <span class=c1># Should see &#34;discord-docker running&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>With Docker, it is as simple as that to get the bot running.</p><h3 id=heroku><a href=#heroku class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Heroku</h3><p>If you&rsquo;re deploying the bot on Heroku, the steps are actually outlined in the documentation for Docker by
Heroku. (<a href=https://devcenter.heroku.com/articles/build-docker-images-heroku-yml>here</a>)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ heroku stack:set container
</span></span><span class=line><span class=cl>$ git push heroku master
</span></span></code></pre></td></tr></table></div></div><p>And watch as Heroku does its magic!</p><h2 id=project-composition><a href=#project-composition class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a>Project composition</h2><h3 id=buildgradle><a href=#buildgradle class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a><code>build.gradle</code></h3><p>The <code>build.gradle</code> straightforward, with the use of the <code>shadowJar</code> plugin to create the fat jar required for all
library dependency. In order to prevent the exported jar from having differing names, we set the <code>archiveName</code> attribute
of the plugin to always use the name <code>bot.${extension}</code>.</p><p>This means that even if we changed the version of the gradle file, the exported jar file is the same name so we don&rsquo;t
need to modify our Dockerfile.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-groovy data-lang=groovy><span class=line><span class=cl><span class=n>plugins</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>id</span> <span class=s1>&#39;org.jetbrains.kotlin.jvm&#39;</span> <span class=n>version</span> <span class=s1>&#39;1.3.41&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>id</span> <span class=s1>&#39;com.github.johnrengelman.shadow&#39;</span> <span class=n>version</span> <span class=s1>&#39;5.0.0&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>sourceCompatibility</span> <span class=o>=</span> <span class=mf>1.8</span>
</span></span><span class=line><span class=cl><span class=n>targetCompatibility</span> <span class=o>=</span> <span class=mf>1.8</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>group</span> <span class=s1>&#39;com.github.woojiahao&#39;</span>
</span></span><span class=line><span class=cl><span class=n>version</span> <span class=s1>&#39;1.0-SNAPSHOT&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>repositories</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>mavenCentral</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=n>maven</span> <span class=o>{</span> <span class=n>url</span> <span class=s1>&#39;https://jitpack.io&#39;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=n>jcenter</span><span class=o>()</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>dependencies</span> <span class=o>{</span><span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>implementation</span> <span class=s2>&#34;org.jetbrains.kotlin:kotlin-stdlib-jdk8&#34;</span>
</span></span><span class=line><span class=cl>  <span class=n>implementation</span> <span class=s2>&#34;com.gitlab.aberrantfox:Kutils:0.9.17&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>compileKotlin</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>kotlinOptions</span><span class=o>.</span><span class=na>jvmTarget</span> <span class=o>=</span> <span class=s2>&#34;1.8&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=n>compileTestKotlin</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>kotlinOptions</span><span class=o>.</span><span class=na>jvmTarget</span> <span class=o>=</span> <span class=s2>&#34;1.8&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>sourceSets</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>main</span><span class=o>.</span><span class=na>java</span><span class=o>.</span><span class=na>srcDirs</span> <span class=o>+=</span> <span class=s1>&#39;src/main/kotlin/&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>test</span><span class=o>.</span><span class=na>java</span><span class=o>.</span><span class=na>srcDirs</span> <span class=o>+=</span> <span class=s1>&#39;src/test/kotlin/&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>jar</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>manifest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>attributes</span> <span class=s2>&#34;Main-Class&#34;</span><span class=o>:</span> <span class=s2>&#34;BotKt&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>from</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>configurations</span><span class=o>.</span><span class=na>compile</span><span class=o>.</span><span class=na>collect</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=n>zipTree</span><span class=o>(</span><span class=n>it</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>shadowJar</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>archiveName</span><span class=o>(</span><span class=s2>&#34;bot.${extension}&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=dockerfile><a href=#dockerfile class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a><code>Dockerfile</code></h3><p>The <code>Dockerfile</code> is a little more interesting as it makes use
of <a href=https://docs.docker.com/v17.09/engine/userguide/eng-image/multistage-build/>multi-stage builds</a> to create a minimal
Docker image.</p><p>Our first image layer uses the official gradle images. We will label this layer as <code>builder</code>. In this layer, our goal is
to create the jar file that will contain all our dependencies. We first access the image as the root user and start with
our working directory labelled as <code>/builder</code>. We then add all of our files into the working directory and finally, we
construct the fat jar using the <code>gradle shadowJar</code> command.</p><p>Then, we create another layer which will be the final layer that goes into the image. We first use the official Alpine
linux image for OpenJDK 8. Then we create a working directory for our application labelled <code>/app</code>. Then we copy our fat
jar from the <code>builder</code> layer to the our home directory. As soon as we are done, we then run the command to execute our
fat jar and it will cause the Discord bot to launch.</p><p>Using Discord allows us to remain Gradle and Java version agnostic. This <code>Dockerfile</code> was taken and modified from the
following article found <a href=https://www.richyhbm.co.uk/posts/kotlin-docker-spring-oh-my/>here.</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-docker data-lang=docker><span class=line><span class=cl><span class=k>FROM</span><span class=s> gradle:5.6.1-jdk8 AS builder</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>USER</span><span class=s> root</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /builder</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>ADD</span> . /builder<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> gradle shadowJar<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>FROM</span><span class=s> openjdk:8-jre-alpine</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>WORKDIR</span><span class=s> /app</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>COPY</span> --from<span class=o>=</span>builder /builder/build/libs/bot.jar .<span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>CMD</span> <span class=p>[</span><span class=s2>&#34;java&#34;</span><span class=p>,</span> <span class=s2>&#34;-jar&#34;</span><span class=p>,</span> <span class=s2>&#34;bot.jar&#34;</span><span class=p>]</span><span class=err>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=herokuyml><a href=#herokuyml class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg>
</a><code>heroku.yml</code></h3><p>The <code>heroku.yml</code> file contains the configuration needed for Heroku to run your application. In that sense, it is similar
to the traditional <code>Procfile</code> that is provided to Heroku applications.</p><p>In this scenario, we don&rsquo;t need to use an elaborate <code>heroku.yml</code> file, all we need is to specify that the worker dyno
will be based off the instructions of the <code>Dockerfile</code> and that&rsquo;s all.</p><p>If you do need to include information like addons and build steps, you can feel free to do so through the use of the
additional properties within the configuration file. More information can be
found <a href=https://devcenter.heroku.com/articles/build-docker-images-heroku-yml>here.</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>docker</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>worker</span><span class=p>:</span><span class=w> </span><span class=l>Dockerfile</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></div></div><div class=container><nav class="flex container suggested"><a rel=prev href=/post/kotlin-delegate-properties/ title="Previous post (older)"><span>Previous</span>
Applications of Kotlin's delegate properties
</a><a rel=next href=/post/gatsby-gh-pages/ title="Next post (newer)"><span>Next</span>
Gatsby.js + GitHub Actions + GitHub Pages = Match Made in Heaven?</a></nav></div><div class=container><div class=disqus-container></div><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script></div></main></main><footer class="footer flex"><section class=container><nav class=footer-links><a href=https://woojiahao.com>About Me</a>
<a href=/index.xml>RSS</a></nav></section><script defer src=/ts/features.706a523ba43e6d0427c7fdf2b9d05dbd0920d3f12942b453690b495cb2522743.js data-enable-footnotes=true></script></footer></body></html>